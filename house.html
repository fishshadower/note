<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>希曦的小屋</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="./css/house.css">
</head>

<body>
    <!-- 自定义鼠标指针 -->
    <img src="./image/cursor.png" alt="Custom Cursor" class="custom-cursor" id="customCursor">

    <div class="main">
        <img src="./image/house/咒语背景墙@2x.png" alt="" class="house_background" id="house_background">

        <img src="./image/house/柜子@2x.png" alt="" class="cabinet" id="cabinet">

        <img src="./image/house/大蜘蛛@2x.png" alt="" class="big_spider" id="big_spider">
        <img src="./image/house/小蜘蛛@2x.png" alt="" class="small_spider" id="small_spider">

        <!-- 让触手作为窗户的子元素 -->
        <div class="window-container">
            <img src="./image/house/窗户@2x.png" alt="窗户" class="thewindow" id="thewindow">
            <!-- <img src="./image/house/触手@2x.png" alt="触手" class="hand" id="hand"> -->
            <img src="./image/house/触手.gif" alt="触手" class="hand" id="hand">
        </div>

        <img src="./image/house/面具眨眼.gif" alt="" class="mask" id="mask">

        <img src="./image/house/桌子@2x.png" alt="" class="thetable" id="thetable">
        <img src="./image/house/骷髅.gif" alt="" class="hedgehog" id="hedgehog">

        <img src="./image/house/左-杯子.gif" alt="" class="hedgehog_left" id="hedgehog_left">
        <img src="./image/house/右-杯子.gif" alt="" class="hedgehog_right" id="hedgehog_right">

        <img src="./image/house/花盆@2x.png" alt="" class="flowerpot" id="flowerpot">

        <img src="./image/house/窗帘@2x.png" alt="" class="window_curtain" id="window_curtain">

        <img src="./image/house/小灯.gif" alt="" class="light_all" id="light_all">

        <!-- <div class="light_container">
            <img src="./image/house/灯1@2x.png" alt="" class="light_1" id="light_1">
            <img src="./image/house/灯2@2x.png" alt="" class="light_2" id="light_2">
            <img src="./image/house/灯3@2x.png" alt="" class="light_3" id="light_3">
            <img src="./image/house/灯4@2x.png" alt="" class="light_4" id="light_4">
            <img src="./image/house/灯5@2x.png" alt="" class="light_5" id="light_5">
            <img src="./image/house/灯6@2x.png" alt="" class="light_6" id="light_6">
            <img src="./image/house/灯7@2x.png" alt="" class="light_7" id="light_7">
            <img src="./image/house/灯8@2x.png" alt="" class="light_8" id="light_8">
        </div> -->


        <img src="./image/house/链子和小灯珠@2x.png" alt="" class="chain" id="chain">

        <img src="./image/house/灯光@2x.png" alt="" class="light" id="light">

        <!-- 猫和书 -->
        <div class="cat-book">
            <img src="./image/house/猫.png" alt="" class="cat" id="cat">
            <img src="./image/house/汪.png" alt="" class="dog" id="dog">
            <img src="./image/house/书@2x.png" alt="" class="book" id="book">
        </div>


        <img src="./image/house/黑色前景@2x.png" alt="" class="foreground" id="foreground">

        <div class="skill_container">
            <img src="./image/house/pc.png" alt="PC" class="card" data-active="./image/house/pc_active.png">
            <img src="./image/house/移动端.png" alt="Phone" class="card" data-active="./image/house/移动端_active.png">
            <img src="./image/house/游戏.png" alt="Game" class="card" data-active="./image/house/游戏_active.png">
            <img src="./image/house/像素.png" alt="Pixel" class="card" data-active="./image/house/像素_active.png">
            <img src="./image/house/平面.png" alt="Plane" class="card" data-active="./image/house/平面_active.png">
            <img src="./image/house/插画.png" alt="Art" class="card" data-active="./image/house/插画_active.png">
            <img src="./image/house/剧本杀.png" alt="Script" class="card" data-active="./image/house/剧本杀_active.png">
            <img src="./image/house/3d.png" alt="3D" class="card" data-active="./image/house/3d_active.png">
        </div>


    </div>

    <!-- 交互 -->
    <script>        
        // document.addEventListener('DOMContentLoaded', function () {
        //     const cards = document.querySelectorAll('.card');

        //     // 预加载所有激活图片
        //     cards.forEach(card => {
        //         new Image().src = card.dataset.active;
        //     });

        //     cards.forEach(card => {
        //         const originalSrc = card.src;
        //         const activeSrc = card.dataset.active;

        //         card.addEventListener('mouseenter', () => {
        //             card.src = activeSrc;
        //             card.style.transform = 'scale(1.4)';
        //             card.style.zIndex = 10;

        //         });

        //         card.addEventListener('mouseleave', () => {
                    
        //             card.src = originalSrc;
        //             card.style.zIndex = 8;
        //             card.style.transform = 'scale(1)';
                    
        //         });
        //     });
        // });

        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.card');

            // 预加载所有激活图片
            cards.forEach(card => {
                new Image().src = card.dataset.active;
            });

            cards.forEach(card => {
                const originalSrc = card.src;
                const activeSrc = card.dataset.active;

                let isHovered = false; // 标记当前是否处于 hover 状态
                let isImageLoaded = false; // 标记激活图片是否已加载完成

                card.addEventListener('mouseenter', () => {
                    isHovered = true; // 标记 hover 状态
                    card.src = activeSrc; // 切换图片

                    // 如果图片已经加载完成，直接应用放大效果
                    if (card.complete) {
                        isImageLoaded = true;
                        card.style.transform = 'scale(1.8)';
                        card.style.zIndex = 10;
                    } else {
                        // 监听图片加载完成事件
                        card.addEventListener('load', () => {
                            isImageLoaded = true;
                            if (isHovered) { // 确保 hover 状态仍然有效
                                card.style.transform = 'scale(1.8)';
                                card.style.zIndex = 10;
                            }
                        }, { once: true });
                    }
                });

                card.addEventListener('mouseleave', () => {
                    isHovered = false; // 取消 hover 状态
                    isImageLoaded = false; // 重置图片加载状态

                    // 先切换回原始图片
                    card.src = originalSrc;

                    // 强制浏览器重绘，避免闪烁
                    void card.offsetWidth;

                    // 缩小图片
                    card.style.transform = 'scale(1)';

                    // 恢复层级
                    card.style.zIndex = 8;
                });
            });
        });


        window.onload = function() {
            const cat = document.getElementById('cat');
            const dog = document.getElementById('dog');
            const catbook = document.getElementById('cat-book');

            // 监听鼠标移入 "animal-container"
            catbook.addEventListener('mouseenter', function () {
                cat.style.opacity = '0';
                cat.style.visibility = 'hidden';
                dog.style.opacity = '1';
                dog.style.visibility = 'visible';
            });

            catbook.addEventListener('mouseleave', function () {
                cat.style.opacity = '1';
                cat.style.visibility = 'visible';
                dog.style.opacity = '0';
                dog.style.visibility = 'hidden';
            });
        }



    </script>

    <!-- 自定义鼠标指针  -->
    <script>
        // 获取自定义鼠标指针的 DOM 元素
        const customCursor = document.getElementById('customCursor');

        // 监听鼠标移动事件，实时更新光标位置
        document.addEventListener('mousemove', (event) => {
            const mouseX = event.clientX;
            const mouseY = event.clientY;

            // 更新光标的位置
            customCursor.style.left = `${mouseX}px`;
            customCursor.style.top = `${mouseY}px`;
        });

        // 监听鼠标点击事件，改变鼠标样式或触发动画
        document.addEventListener('mousedown', () => {
            customCursor.style.transform = 'translate(-50%, -50%) scale(1.2)'; // 点击时放大
        });

        document.addEventListener('mouseup', () => {
            customCursor.style.transform = 'translate(-50%, -50%) scale(1)'; // 恢复默认大小
        });
    </script>
</body>

</html>