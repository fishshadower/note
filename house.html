<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∏åÊõ¶ÁöÑÂ∞èÂ±ã</title>
    <script src="./js/anime.min.js"></script>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="./css/house.css">
</head>

<body>
    <!-- Ëá™ÂÆö‰πâÈº†Ê†áÊåáÈíà -->
    <img src="./image/cursor.png" alt="Custom Cursor" class="custom-cursor" id="customCursor">

    <!-- ÈÄèÊòéÂç°ÁâáÔºå‰∫∫Áâ©ËÑ∏ÈÉ®Ëß¶Âèë -->
    <div class="face_card" id="face_card"></div>

    <div id="musicBtn" class="music-btn clickable">
        <img id="musicIcon" src="./image/Èü≥‰πêÂÖ≥.png" alt="Music Icon">
    </div>

    <div class="main">
        <img src="./image/house/ÂííËØ≠ËÉåÊôØÂ¢ô@2x.png" alt="" class="house_background" id="house_background">

        <img src="./image/house/ÊüúÂ≠ê@2x.png" alt="" class="cabinet" id="cabinet">

        <img src="./image/house/Â§ßËúòËõõ@2x.png" alt="" class="big_spider" id="big_spider">
        <img src="./image/house/Â∞èËúòËõõ@2x.png" alt="" class="small_spider" id="small_spider">

        <!-- ËÆ©Ëß¶Êâã‰Ωú‰∏∫Á™óÊà∑ÁöÑÂ≠êÂÖÉÁ¥† -->
        <div class="window-container">
            <img src="./image/house/Á™óÊà∑@2x.png" alt="Á™óÊà∑" class="thewindow" id="thewindow">
            <!-- <img src="./image/house/Ëß¶Êâã@2x.png" alt="Ëß¶Êâã" class="hand" id="hand"> -->
            <img src="./image/house/Ëß¶Êâã.gif" alt="Ëß¶Êâã" class="hand" id="hand">
        </div>

        <img src="./image/house/Èù¢ÂÖ∑Áú®Áúº.gif" alt="" class="mask" id="mask">
        <img src="./image/house/ÂØπËØùÊ°Ü.gif" alt="" class="think_more" id="think_more">
        <!-- <img src="./image/house/ÊäÄËÉΩÂç°ÁâáÂä®Áîª.gif" alt="" class="mask_active" id="mask_active"> -->
        <img src="./image/house/ÊäÄËÉΩÂç°ÁâáÂä®Áîª_ÁôΩËæπ.gif" alt="" class="mask_active" id="mask_active">

        <img src="./image/house/Ê°åÂ≠ê@2x.png" alt="" class="thetable" id="thetable">
        <img src="./image/house/È™∑È´Ö.gif" alt="" class="hedgehog" id="hedgehog">

        <img src="./image/house/Â∑¶-ÊùØÂ≠ê.gif" alt="" class="hedgehog_left" id="hedgehog_left">
        <img src="./image/house/Âè≥-ÊùØÂ≠ê.gif" alt="" class="hedgehog_right" id="hedgehog_right">

        <img src="./image/house/Ëä±ÁõÜ@2x.png" alt="" class="flowerpot" id="flowerpot">

        <img src="./image/house/Á™óÂ∏ò@2x.png" alt="" class="window_curtain" id="window_curtain">

        <img src="./image/house/Â∞èÁÅØ.gif" alt="" class="light_all" id="light_all">

        <!-- <div class="light_container">
            <img src="./image/house/ÁÅØ1@2x.png" alt="" class="light_1" id="light_1">
            <img src="./image/house/ÁÅØ2@2x.png" alt="" class="light_2" id="light_2">
            <img src="./image/house/ÁÅØ3@2x.png" alt="" class="light_3" id="light_3">
            <img src="./image/house/ÁÅØ4@2x.png" alt="" class="light_4" id="light_4">
            <img src="./image/house/ÁÅØ5@2x.png" alt="" class="light_5" id="light_5">
            <img src="./image/house/ÁÅØ6@2x.png" alt="" class="light_6" id="light_6">
            <img src="./image/house/ÁÅØ7@2x.png" alt="" class="light_7" id="light_7">
            <img src="./image/house/ÁÅØ8@2x.png" alt="" class="light_8" id="light_8">
        </div> -->


        <img src="./image/house/ÈìæÂ≠êÂíåÂ∞èÁÅØÁè†@2x.png" alt="" class="chain" id="chain">

        <img src="./image/house/ÁÅØÂÖâ@2x.png" alt="" class="light" id="light">

        <!-- Áå´Âíå‰π¶ -->
        <div class="cat-book">
            <img src="./image/house/Áå´.png" alt="" class="cat" id="cat">
            <img src="./image/house/Ê±™.png" alt="" class="dog" id="dog">
            <img src="./image/house/‰π¶@2x.png" alt="" class="book" id="book">
        </div>


        <img src="./image/house/ÈªëËâ≤ÂâçÊôØ@2x.png" alt="" class="foreground" id="foreground">

        <div class="skill_container">
            <img src="./image/house/pc.png" alt="PC" class="card clickable" data-active="./image/house/pc_active.png" data-type="pc">
            <img src="./image/house/ÁßªÂä®Á´Ø.png" alt="Phone" class="card clickable" data-active="./image/house/ÁßªÂä®Á´Ø_active.png" data-type="phone">
            <img src="./image/house/Ê∏∏Êàè.png" alt="Game" class="card clickable" data-active="./image/house/Ê∏∏Êàè_active.png" data-type="game">
            <img src="./image/house/ÂÉèÁ¥†.png" alt="Pixel" class="card clickable" data-active="./image/house/ÂÉèÁ¥†_active.png" data-type="pixel">
            <img src="./image/house/Âπ≥Èù¢.png" alt="Plane" class="card clickable" data-active="./image/house/Âπ≥Èù¢_active.png" data-type="plane">
            <img src="./image/house/ÊèíÁîª.png" alt="Art" class="card clickable" data-active="./image/house/ÊèíÁîª_active.png" data-type="art">
            <img src="./image/house/ÂâßÊú¨ÊùÄ.png" alt="Script" class="card clickable" data-active="./image/house/ÂâßÊú¨ÊùÄ_active.png" data-type="script">
            <img src="./image/house/3d.png" alt="3D" class="card clickable" data-active="./image/house/3d_active.png" data-type="3d">
        </div>

        <!-- ËøîÂõû -->
        <img src="./image/back.png" alt="Back" class="back clickable" id="back">

        <!-- ËÄÅÁîµÂΩ±ÊïàÊûú -->
        <img src="./image/old_movie_1.png" alt="" class="old_movie" id="old_movie_1">
        <img src="./image/old_movie_2.png" alt="" class="old_movie" id="old_movie_2">



    </div>

    <script src="./main.js"></script>
    <script>

        // ËøîÂõû
        const back = document.getElementById('back');
        back.addEventListener('click', () => {
            window.location.href = './welcome.html';
        });

        // Âç°ÁâáÊøÄÊ¥ª
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.card');

            // È¢ÑÂä†ËΩΩÊâÄÊúâÊøÄÊ¥ªÂõæÁâá
            cards.forEach(card => {
                new Image().src = card.dataset.active;
            });

            cards.forEach(card => {
                const originalSrc = card.src;
                const activeSrc = card.dataset.active;

                let isHovered = false; // Ê†áËÆ∞ÂΩìÂâçÊòØÂê¶Â§Ñ‰∫é hover Áä∂ÊÄÅ
                let isImageLoaded = false; // Ê†áËÆ∞ÊøÄÊ¥ªÂõæÁâáÊòØÂê¶Â∑≤Âä†ËΩΩÂÆåÊàê

                card.addEventListener('mouseenter', () => {
                    isHovered = true; // Ê†áËÆ∞ hover Áä∂ÊÄÅ
                    card.src = activeSrc; // ÂàáÊç¢ÂõæÁâá

                    // Â¶ÇÊûúÂõæÁâáÂ∑≤ÁªèÂä†ËΩΩÂÆåÊàêÔºåÁõ¥Êé•Â∫îÁî®ÊîæÂ§ßÊïàÊûú
                    if (card.complete) {
                        isImageLoaded = true;
                        card.style.transform = 'scale(1.4)';
                        card.style.zIndex = 10;
                    } else {
                        // ÁõëÂê¨ÂõæÁâáÂä†ËΩΩÂÆåÊàê‰∫ã‰ª∂
                        card.addEventListener('load', () => {
                            isImageLoaded = true;
                            if (isHovered) { // Á°Æ‰øù hover Áä∂ÊÄÅ‰ªçÁÑ∂ÊúâÊïà
                                card.style.transform = 'scale(1.4)';
                                card.style.zIndex = 10;
                            }
                        }, { once: true });
                    }
                });

                card.addEventListener('mouseleave', () => {
                    isHovered = false; // ÂèñÊ∂à hover Áä∂ÊÄÅ
                    isImageLoaded = false; // ÈáçÁΩÆÂõæÁâáÂä†ËΩΩÁä∂ÊÄÅ

                    // ÂÖàÂàáÊç¢ÂõûÂéüÂßãÂõæÁâá
                    card.src = originalSrc;

                    // Âº∫Âà∂ÊµèËßàÂô®ÈáçÁªòÔºåÈÅøÂÖçÈó™ÁÉÅ
                    void card.offsetWidth;

                    // Áº©Â∞èÂõæÁâá
                    card.style.transform = 'scale(1)';

                    // ÊÅ¢Â§çÂ±ÇÁ∫ß
                    card.style.zIndex = 8;
                });
            });

            // ÁÇπÂáªÂç°ÁâáË∑≥ËΩ¨Âπ∂‰º†ÂèÇ
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    const type = card.dataset.type; // ËØªÂèñËá™ÂÆö‰πâÂèÇÊï∞
                    const url = `./works.html?type=${encodeURIComponent(type)}`;
                    window.location.href = url;
                });
            });
        });

          // ËÄÅÁîµÂΩ±ÊïàÊûú
          document.addEventListener('DOMContentLoaded', function () {
            const movie1 = document.getElementById('old_movie_1');
            const movie2 = document.getElementById('old_movie_2');
            let isMovie1Visible = true;

            setInterval(() => {
                if (isMovie1Visible) {
                    movie1.style.display = 'none';
                    movie2.style.display = 'block';
                } else {
                    movie1.style.display = 'block';
                    movie2.style.display = 'none';
                }
                isMovie1Visible = !isMovie1Visible;
            }, 200); // ÊØè 200ms ÂàáÊç¢‰∏ÄÊ¨°
        });

        // Áå´ÂíåÁãó
        document.addEventListener("DOMContentLoaded", function () {
            const cat = document.getElementById('cat');
            const dog = document.getElementById('dog');
            const catbook = document.querySelector('.cat-book'); // ‰øÆÊîπ‰∏∫Ê≠£Á°ÆÁöÑ class ÈÄâÊã©Âô®

            if (catbook) {
                catbook.addEventListener('mouseenter', function () {
                    cat.style.opacity = '0';
                    cat.style.visibility = 'hidden';
                    dog.style.opacity = '1';
                    dog.style.visibility = 'visible';
                });

                catbook.addEventListener('mouseleave', function () {
                    cat.style.opacity = '1';
                    cat.style.visibility = 'visible';
                    dog.style.opacity = '0';
                    dog.style.visibility = 'hidden';
                });
            }
        });


        // ËúòËõõÊî∂Áº©
        document.addEventListener("DOMContentLoaded", function () {
            const bigSpider = document.getElementById("big_spider");
            const smallSpider = document.getElementById("small_spider");

            bigSpider.addEventListener("mouseenter", function () {
                bigSpider.src = "./image/house/Â§ßËúòËõõÁº©Â∞è.png"; // ÂàáÊç¢Áº©Â∞èÂõæÁâá
                bigSpider.style.pointerEvents = "none"; // Á¶ÅÊ≠¢Èº†Ê†á‰∫ã‰ª∂ÔºåÈò≤Ê≠¢Èó™ÁÉÅ

                setTimeout(() => {
                    bigSpider.src = "./image/house/Â§ßËúòËõõ@2x.png"; // 1.5 ÁßíÂêéÊÅ¢Â§çÂéüÊù•ÁöÑÂõæÁâá
                    bigSpider.style.pointerEvents = "auto"; // ÊÅ¢Â§çÈº†Ê†á‰∫ã‰ª∂
                }, 1500);
            });

            smallSpider.addEventListener("mouseenter", function () {
                smallSpider.src = "./image/house/Â∞èËúòËõõÁº©Â∞è.png";
                smallSpider.style.pointerEvents = "none";

                setTimeout(() => {
                    smallSpider.src = "./image/house/Â∞èËúòËõõ@2x.png";
                    smallSpider.style.pointerEvents = "auto";
                }, 1500);
            });
        });

        // ÈÄèÊòéÂç°ÁâáÔºå‰∫∫Áâ©ËÑ∏ÈÉ®Ëß¶Âèë
        // Èº†Ê†áÁßªÂÖ•Ôºå‰∫∫Áâ©Âèò‰∏∫Êëò‰∏ãÈù¢ÂÖ∑ÁöÑÂõæÁâáÔºåÂêåÊó∂thinkmoregifÈöêËóèÔºå Èº†Ê†áÁßªÂá∫Ôºå‰∫∫Áâ©ÊÅ¢Â§çÔºåthinkmoregifÊòæÁ§∫
        document.addEventListener("DOMContentLoaded", function () {
            const faceCard = document.getElementById("face_card");
            const mask = document.getElementById("mask");
            const thinkMore = document.getElementById("think_more");
            const maskActive = document.getElementById("mask_active");
            faceCard.addEventListener("mouseenter", function () {
                mask.style.display = "none";
                thinkMore.style.display = "none";
                maskActive.style.display = "block";
            });
            faceCard.addEventListener("mouseleave", function () {
                mask.style.display = "block";
                thinkMore.style.display = "block";
                maskActive.style.display = "none";
            });
        });

        // Êí≠ÊîæËÉåÊôØÈü≥‰πê
        document.addEventListener('DOMContentLoaded', function () {
            const musicBtn = document.getElementById('musicBtn');
            const musicIcon = document.getElementById('musicIcon');
            const backgroundMusic = new Audio('./mp3/Â∞èÂ±ãÈü≥‰πê.mp3');
            backgroundMusic.loop = true;
            backgroundMusic.volume = 0.5;

            let isPlaying = false;
            let hasUserInteracted = false;

            const updateIcon = () => {
                musicIcon.src = isPlaying ? './image/Èü≥‰πêÂºÄ.png' : './image/Èü≥‰πêÂÖ≥.png';
            };

            // ÁÇπÂáªÊåâÈíÆÊéßÂà∂Èü≥‰πê
            musicBtn.addEventListener('click', function (event) {
                event.stopPropagation();

                if (!isPlaying) {
                    backgroundMusic.play()
                        .then(() => {
                            isPlaying = true;
                            updateIcon();
                        })
                        .catch(err => {
                            console.warn("‚ö†Ô∏è Êí≠ÊîæÂ§±Ë¥•Ôºö", err);
                        });
                } else {
                    backgroundMusic.pause();
                    isPlaying = false;
                    updateIcon();
                }
            });

            // È¶ñÊ¨°ÁÇπÂáª‰ªªÊÑèÂú∞ÊñπËá™Âä®Êí≠Êîæ
            const startMusic = () => {
                if (!hasUserInteracted) {
                    backgroundMusic.play()
                        .then(() => {
                            isPlaying = true;
                            hasUserInteracted = true;
                            updateIcon();
                            console.log("üéµ È¶ñÊ¨°ÁÇπÂáªËá™Âä®Êí≠ÊîæÊàêÂäü");
                        })
                        .catch(err => {
                            console.warn("‚ö†Ô∏è È¶ñÊ¨°Ëá™Âä®Êí≠ÊîæÂ§±Ë¥•Ôºö", err);
                        });

                    document.removeEventListener('click', startMusic);
                }
            };

            document.addEventListener('click', startMusic);
        });

    </script>
</body>

</html>