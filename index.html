<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸Œæ›¦çš„å°å±‹</title>
	<link rel="stylesheet" href="main.css">
    <script src="./js/anime.min.js"></script>
    <style>
        .moon {
            width: 40%;
            position: absolute;
            top: 1%;
            left: 36%;
            z-index: 0;
        }

        .fluorescence {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;

            /* åˆå§‹çŠ¶æ€ */
            opacity: 0.2; /* é»˜è®¤äº®åº¦ */
            animation: breathing 3s ease-in-out infinite; /* å‘¼å¸ç¯æ•ˆæœåŠ¨ç”»ï¼Œæ—¶é•¿ä¸º 2sï¼Œèˆ’ç¼“è¿‡æ¸¡ */
        }

        /* å®šä¹‰å‘¼å¸ç¯åŠ¨ç”» */
        @keyframes breathing {
            0% {
                opacity: 0.2; /* åˆå§‹äº®åº¦ */
            }
            50% {
                opacity: 1; /* æœ€äº® */
            }
            100% {
                opacity: 0.2; /* å›åˆ°åˆå§‹äº®åº¦ */
            }
        }

        .title {
            width: 90%;
            position: absolute;
            top: 1%;
            left: 5%;
            z-index: 2;
            transform-origin: center center;
        }

        .house {
            width: 75%;
            position: absolute;
            bottom: 0%;
            /* left: 16%; */
            z-index: 3;
            height: 90%;
        }

        .mountain {
            width: 100%;
            position: absolute;
            bottom: 0%;
            /* left: 20%; */
            z-index: 4;
        }

        .tree {
            width: 100%;
            position: absolute;
            bottom: 0%;
            right: 0%;
            z-index: 5;
        }

        .leaf {
            width: 100%;
			height: 100%;
            position: absolute;
            bottom: 0%;
            right: 0%;
            z-index: 6;
        }

        .person {
			height: 58%;
            position: absolute;
            bottom: 0%;
            z-index: 7;
        }

        .hi {
            position: absolute;
            bottom: 29%;
            right: 88%;
            z-index: 7;
            width: 6%;
        }

        .start_chat {
            position: absolute;
            bottom: 17%;
            right: 78%;
            z-index: 7;
            width: 16%;
        }
        .start_chat_div {
            position: absolute;
            bottom: 19.5%;
            right: 79.5%;
            z-index: 7;
        }

        /* å®¹å™¨æ ·å¼ */
        .start_chat_container {
            display: inline-block; /* ä¿è¯å†…éƒ¨å…ƒç´ çš„å¸ƒå±€ */
        }

        .start_chat_text {
            font-family: 'ShanghaiFace', sans-serif;
            font-size: clamp(20px, 1.8vw, 60px); /* å­—ä½“å¤§å°åŠ¨æ€é€‚åº” */
            color: #FFFFFF;
            transition: color 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡ */
        }

        /* é¼ æ ‡ç§»å…¥æ—¶æ”¹å˜æ–‡å­—é¢œè‰² */
        .start_chat_container:hover .start_chat_text {
            color: #AFE420; /* é¼ æ ‡ç§»å…¥æ—¶å˜ç»¿è‰² */
        }

        .think_more {
            position: absolute;
            bottom: 6%;
            right: 85%;
            z-index: 7;
            height: 9%;
        }

        .download {
            position: absolute;
            right: 0%;
            z-index: 7;
        }

        .old_movie {
            width: 100%;
            position: fixed;  /* æ”¹ä¸º fixedï¼Œè¿™æ ·ä¸ä¼šå½±å“é¡µé¢å†…å®¹çš„å¸ƒå±€ */
            top: 0;
            left: 0;
            z-index: 10;
            max-height: 100vh; /* é™åˆ¶å›¾ç‰‡æœ€å¤§é«˜åº¦ä¸ºè§†å£é«˜åº¦ */
            object-fit: cover; /* ç¡®ä¿å›¾ç‰‡ä¿æŒæ¯”ä¾‹å¡«å…… */
            pointer-events: none; /* ç¦æ­¢æ¥æ”¶é¼ æ ‡äº‹ä»¶ */
        }

        #old_movie_1, #old_movie_2 {
            display: none; /* åˆå§‹éƒ½ä¸æ˜¾ç¤º */
        }

        #old_movie_1 {
            display: block;
        }

        .music-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 9999;
            width: 40px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            user-select: none;
            transition: background 0.3s ease;
        }

        .music-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }



    </style>
</head>
<body>
    <!-- è‡ªå®šä¹‰é¼ æ ‡æŒ‡é’ˆ -->
    <img src="./image/cursor.png" alt="Custom Cursor" class="custom-cursor" id="customCursor">

    <!-- å·¦ä¸Šè§’éŸ³ä¹æŒ‰é’® -->
    <div id="musicBtn" class="music-btn">ğŸµ</div>

    <div class="main">

        <!-- æœˆäº® -->
        <img class="moon" src="./image/moon.png" alt="Moon" id="moon">

        <!-- è§å…‰å›¾ç‰‡ -->
        <img class="fluorescence" src="./image/fluorescence.png" alt="Fluorescence">

        <!-- æ ‡é¢˜ -->
        <img src="./image/big_title.png" alt="Title" class="title" id="big_title">

        <!-- æˆ¿å­ -->
        <img src="./image/house.png" alt="House" class="house">

        <!-- å±±ä½“ -->
        <img src="./image/mountain_1.png" alt="Mountain" class="mountain">
        <img src="./image/mountain_2.png" alt="Mountain" class="mountain">

        <!-- å°–å¤´æ ‘æœ¨ -->
        <img src="./image/tree.png" alt="Tree" class="tree">

        <!-- å¶å­ -->
        <img src="./image/leaf.png" alt="Leaf" class="leaf">

        <!-- äººç‰©åŠå¯¹è¯æ¡† -->
        <img src="./image/person_begin.png" alt="Person" class="person">
        <img src="./image/hi.png" alt="Hi" class="hi">

        <div class="start_chat_container clickable">
            <img src="./image/start_chat.png" alt="Chat" class="start_chat" id="start_chat">
            <div class="start_chat_div" id="start_chat_div">
                <span class="start_chat_text">ç‚¹æˆ‘ï¼Œå¼€å§‹å¯¹è¯</span>
            </div>
        </div>

        <img src="./image/think_more.gif" alt="More" class="think_more">

        
        <!-- ç®€å†ä¸‹è½½ -->
        <img src="./image/download.png" alt="Download" class="download clickable" id="download">

        <!-- è€ç”µå½±æ•ˆæœ -->
        <img src="./image/old_movie_1.png" alt="" class="old_movie" id="old_movie_1">
        <img src="./image/old_movie_2.png" alt="" class="old_movie" id="old_movie_2">


    </div>

    <script src="./main.js"></script>

    <!-- åŠ¨ç”» -->
    <script>

        // æœˆäº®ç§»åŠ¨
        const moon = document.getElementById('moon');
        const main = document.querySelector('.main');

        main.addEventListener('mousemove', function(event) {
            const mouseX = event.clientX;
            const mouseY = event.clientY;

            const moonRect = moon.getBoundingClientRect();
            const moonCenterX = moonRect.left + moonRect.width / 2;
            const moonCenterY = moonRect.top + moonRect.height / 2;

            const deltaX = mouseX - moonCenterX;
            const deltaY = mouseY - moonCenterY;

            // ä½¿ç”¨ anime.js å®ç°æŸ”å’Œçš„å¼¹æ€§æ•ˆæœ
            anime({
                targets: moon,
                translateX: [
                    { value: deltaX / 12, duration: 500, easing: 'easeOutElastic(0.5, 0.4)' }
                ],
                translateY: [
                    { value: deltaY / 12, duration: 500, easing: 'easeOutElastic(0.5, 0.4)' }
                ]
            });

			// æ ‡é¢˜ç§»åŠ¨
			const big_title = document.getElementById('big_title');
			anime({
                targets: big_title,
                translateX: deltaX / 20, 
                translateY: deltaY / 30,
                duration: 500,
                easing: 'easeOutQuad'
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            const movie1 = document.getElementById('old_movie_1');
            const movie2 = document.getElementById('old_movie_2');
            let isMovie1Visible = true;

            setInterval(() => {
                if (isMovie1Visible) {
                    movie1.style.display = 'none';
                    movie2.style.display = 'block';
                } else {
                    movie1.style.display = 'block';
                    movie2.style.display = 'none';
                }
                isMovie1Visible = !isMovie1Visible;
            }, 200); // æ¯ 200ms åˆ‡æ¢ä¸€æ¬¡
        });

    </script>
    

    <!-- äº¤äº’å¤„ç† -->
    <script>
        // è¯»å– JSON æ–‡ä»¶
        let mainData;
        fetch('https://fishshadower.github.io/file_hub/mainData.json')
            .then(response => response.json())
            .then(data => {
                mainData = data;
                console.log("å“åº”æ•°æ®",data);
            }).catch(error => {
                console.error('Error:', error);
            });

        // PDFæ–‡ä»¶ç›´æ¥ä¸‹è½½
        const download = document.getElementById('download');
        // ä¸‹è½½PDFæ–‡ä»¶
        download.addEventListener('click', function() {
            let biographicalNoteUrl = mainData.biographicalNote;
            window.open(biographicalNoteUrl, '_blank');
        });

		// å‰å¾€æ¬¢è¿é¡µ
		const start_chat = document.getElementById('start_chat');
		start_chat.addEventListener('click', function() {
			window.location.href = 'welcome.html';
		});
        const start_chat_div = document.getElementById('start_chat_div');
        start_chat_div.addEventListener('click', function() {
            window.location.href = 'welcome.html';
        });

        // æ’­æ”¾èƒŒæ™¯éŸ³ä¹
        document.addEventListener('DOMContentLoaded', function () {
            const musicBtn = document.getElementById('musicBtn');
            const backgroundMusic = new Audio('./mp3/å¤–æ™¯éŸ³ä¹.mp3');
            backgroundMusic.loop = true;
            backgroundMusic.volume = 0.5;

            let isPlaying = false;
            let hasUserInteracted = false;

            // æ‰‹åŠ¨ç‚¹å‡»æŒ‰é’®ï¼šæ’­æ”¾/æš‚åœ
            musicBtn.addEventListener('click', function (event) {
                event.stopPropagation(); // é˜²æ­¢å†’æ³¡åˆ° document è§¦å‘è‡ªåŠ¨æ’­æ”¾

                if (!isPlaying) {
                    backgroundMusic.play()
                        .then(() => {
                            isPlaying = true;
                            musicBtn.textContent = 'â¸ï¸';
                        })
                        .catch(err => {
                            console.warn("âš ï¸ æ’­æ”¾å¤±è´¥ï¼š", err);
                        });
                } else {
                    backgroundMusic.pause();
                    isPlaying = false;
                    musicBtn.textContent = 'ğŸµ';
                }
            });

            // é¦–æ¬¡ç‚¹å‡»é¡µé¢ä»»æ„å¤„ï¼šè‡ªåŠ¨æ’­æ”¾
            const startMusic = () => {
                if (!hasUserInteracted) {
                    backgroundMusic.play()
                        .then(() => {
                            isPlaying = true;
                            hasUserInteracted = true;
                            musicBtn.textContent = 'â¸ï¸';
                            console.log("ğŸµ é¦–æ¬¡ç‚¹å‡»è‡ªåŠ¨æ’­æ”¾æˆåŠŸ");
                        })
                        .catch(err => {
                            console.warn("âš ï¸ é¦–æ¬¡è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼š", err);
                        });

                    document.removeEventListener('click', startMusic); // ä¸€æ¬¡ç»‘å®š
                }
            };

            document.addEventListener('click', startMusic);
        });


        
        


    </script>
</body>
</html>
